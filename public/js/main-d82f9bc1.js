function makeWorld(){document.getElementsByTagName("main")[0].style.visibility="visible";var e={};e.width=window.innerWidth,e.height=window.innerHeight,e.centerX=e.width/2,e.centerY=e.height/2,e.offsetX=e.width/2,e.offsetY=e.height/2;var t=Matter.Engine,n=Matter.Render,i=Matter.Runner,o=Matter.Common,r=Matter.World,a=Matter.Bodies,s=(Matter.Body,Matter.Events),d=Matter.Query,l=Matter.MouseConstraint,c=Matter.Mouse,h=t.create(),w=h.world,u=n.create({engine:h,element:document.getElementById("debug"),options:{width:window.innerWidth,height:window.innerHeight,background:"transparent",wireframeBackground:"transparent",hasBounds:!1,enabled:!0,wireframes:!1,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}});n.run(u);var m=i.create();i.run(m,h);var f={isStatic:!0,restitution:.2,friction:1};r.add(w,[a.rectangle(window.innerWidth/2,window.innerHeight+50,window.innerWidth+200,100,{isStatic:!0,restitution:0,friction:2}),a.rectangle(window.innerWidth/2,-50,window.innerWidth+200,100,f),a.rectangle(window.innerWidth+50,window.innerHeight/2,100,window.innerHeight,f),a.rectangle(-50,window.innerHeight/2,100,window.innerHeight,f)]);for(var g=document.querySelectorAll(".matter-body"),y=[],v=0,p=g.length;v<p;v++){if(g[v].classList.contains("hot")?(frA=.1,oY=-40):(frA=0,oY=0),g[v].classList.contains("strip"))var b=a.rectangle(e.centerX+Math.floor(Math.random()*e.width/2)-e.width/4,oY,e.width*g[v].offsetWidth/window.innerWidth,e.height*g[v].offsetHeight/window.innerHeight,{restitution:.05,friction:2,frictionAir:frA,frictionStatic:20,density:100,chamfer:{radius:4},angle:2*Math.random()-1});else if(g[v].classList.contains("page-nav"))b=a.circle(e.centerX+Math.floor(Math.random()*e.width/2)-e.width/4,0,24,{restitution:.3,friction:2,frictionAir:0,frictionStatic:2,density:100,angle:2*Math.random()-1});g[v].id=b.id,y.push(b)}r.add(h.world,y);window.addEventListener("deviceorientation",function(e){var t=void 0!==window.orientation?window.orientation:0,n=h.world.gravity;0===t?(n.x=o.clamp(e.gamma,-90,90)/90,n.y=o.clamp(e.beta,-90,90)/90):180===t?(n.x=o.clamp(e.gamma,-90,90)/90,n.y=o.clamp(-e.beta,-90,90)/90):90===t?(n.x=o.clamp(e.beta,-90,90)/90,n.y=o.clamp(-e.gamma,-90,90)/90):-90===t&&(n.x=o.clamp(-e.beta,-90,90)/90,n.y=o.clamp(e.gamma,-90,90)/90)});var M,x,W,A,B,H,E=c.create(u.canvas),S=l.create(h,{mouse:E,constraint:{stiffness:1,render:{visible:!1}}});function L(){for(var e=document.getElementsByClassName("hover"),t=0;t<e.length;t++)e[t].classList.remove("hover");document.body.style.cursor="auto"}r.add(h.world,S),u.mouse=E,s.on(S,"mousemove",function(e){if(M=e.mouse.absolute.x,x=e.mouse.absolute.y,d.point(y,{x:M,y:x}).length){L();var t=d.point(y,{x:M,y:x})[0].id;document.getElementById(t).className+=" hover",document.body.style.cursor="pointer"}else L()}),s.on(S,"mousedown",function(e){W=e.mouse.absolute.x,A=e.mouse.absolute.y}),s.on(S,"mouseup",function(e){if(B=e.mouse.absolute.x,H=e.mouse.absolute.y,W==B&&A==H){if(d.point(y,{x:B,y:H}).length)var t=d.point(y,{x:B,y:H})[0].id;t&&(window.location.href=document.getElementById(t).getAttribute("data-url"))}L()}),window.requestAnimationFrame(function e(){for(var t=0,n=g.length;t<n;t++){for(var i=g[t],o=null,r=0,a=y.length;r<a;r++)if(y[r].id==i.id){o=y[r];break}null!==o&&(i.style.transform="translate( "+(o.position.x-i.offsetWidth/2)+"px, "+(o.position.y-i.offsetHeight/2)+"px )",i.style.transform+="rotate( "+o.angle+"rad )")}window.requestAnimationFrame(e)})}function debounce(n,i,o){var r;return function(){var e=this,t=arguments;clearTimeout(r),r=setTimeout(function(){r=null,o||n.apply(e,t)},i),o&&!r&&n.apply(e,t)}}makeWorld();var refreshWorld=debounce(function(){location.reload()},500);window.addEventListener("resize",refreshWorld);